"use strict";angular.module("sbAdminApp").controller("UpcomingMoviesCtrl",function($scope,$http,apiKey,$q,admin_upcoming_movies){$scope.imagePath=apiKey.imagePath(),console.log(apiKey.imagePath()),$scope.typedMovie="",$scope.showMovieSuggestions=function(movieName){admin_upcoming_movies.getAdminUpcomingMovies(movieName).then(function(response){$scope.searchedMovie=response.data.data,$scope.upReleaseDateMovie=$scope.searchedMovie,$scope.movieId=$scope.upReleaseDateMovie[0].upMovieId,console.log("search",$scope.searchedMovie,"typed",$scope.typedMovie,$scope.upReleaseDateMovie[0].upReleaseDate)})},$scope.quickMovieSuggestions=function(){admin_upcoming_movies.getQuickRecommendations().then(function(response){$scope.quickRecommendations=response.data.data})},$scope.quickMovieSuggestions(),$scope.updateMovie=function(){admin_upcoming_movies.updateAdminUpcomingMovies($scope.movieId).then(function(data){$scope.addedMovies()})},$scope.updatedMovie=function(data){admin_upcoming_movies.updateAdminUpcomingMovies(data).then(function(data){$scope.addedMovies(),$scope.quickMovieSuggestions()})},$scope.removeUpComingMovies=function(movieID){admin_upcoming_movies.removeUpComingMovies(movieID).then(function(){$scope.addedMovies()})},$scope.addedMovies=function(){admin_upcoming_movies.getAddedMovies().then(function(response){$scope.addedMoviesList=response.data.data})},$scope.addedMovies(),$scope.clickedMovie=function(index){$scope.showClickedMovie=$scope.addedMoviesList[index],console.log("qwerty",$scope.addedMoviesList[index])},$scope.movieToCurrent=function(movieID){admin_upcoming_movies.moveToCurrent(movieID).then(function(){$scope.removeUpComingMovies(movieID)})},$scope.uploadFile=function(files){var fd=new FormData;console.log(files),fd.append("file",files[0]),$http.post("/images",fd,{withCredentials:!0,headers:{"Content-Type":"image/jpeg"},transformRequest:angular.identity}).success(function(data){console.log("Success",data)}).error(function(data){console.log("Error",data)})}});